# 1. ì£¼ì†Œ ë³€í™˜(Address Mapping)

**í˜¸ìŠ¤íŠ¸ë‚˜ ë¼ìš°í„°ë¡œ íŒ¨í‚·ì„ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œëŠ” ë…¼ë¦¬ ë° ë¬¼ë¦¬ ì£¼ì†Œê°€ ëª¨ë‘ í•„ìš”í•˜ë‹¤**

> ë…¼ë¦¬ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” ê²ƒê³¼, ê·¸ ë°˜ëŒ€ì˜ ë³€í™˜ë„ í•„ìš”í•˜ë‹¤.
- ì´ ë³€í™˜ë“¤ì€ ì •ì  ë˜ëŠ” ë™ì ìœ¼ë¡œ ê°€ëŠ¥
> 

## 1.1 ì •ì  ë³€í™˜

**ì •ì  ë³€í™˜ì—ì„œëŠ” ë…¼ë¦¬ ì£¼ì†Œì™€ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì—°ê´€ì‹œí‚¤ëŠ” `í…Œì´ë¸”`ì„ ì‚¬ìš©í•œë‹¤**

- ì´ í…Œì´ë¸”ì€ ë„¤íŠ¸ì›Œí¬ ìƒì˜ ê° ê¸°ê³„ ë‚´ì— ì €ì¥(ë¼ìš°í„° ë‚´ì— ì €ì¥)
- ë‹¤ë¥¸ ê¸°ê³„ì˜ IP ì£¼ì†Œë¥¼ ì•Œê³ ìˆëŠ”ë° ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ëª¨ë¥´ëŠ” ê²½ìš° ì´ í…Œì´ë¸”ì„ ë“¤ì—¬ë‹¤ ë³´ë©´ ëœë‹¤.
- ì •ì  í…Œì´ë¸”ì€ ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ ë˜ì–´ì•¼ í•œë‹¤
    - ê¸°ê³„ì˜ NICë¥¼ ë°”ê¿€ ìˆ˜ ìˆìŒ
    - ì´ë™ ì»´í“¨í„°ê°€ í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ì—ì„œ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë™ ê°€ëŠ¥

## 1.2 ë™ì  ë³€í™˜

í•œ ê¸°ê³„ê°€ ë‹¤ë¥¸ ê¸°ê³„ì˜ ë…¼ë¦¬ ì£¼ì†Œë¥¼ ì•Œê³  ìˆì„ ë•Œ, í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë¬¼ë¦¬ ì£¼ì†Œ ë˜ëŠ” ë…¼ë¦¬ ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.

**ë™ì  ë³€í™˜ì„ ìœ„í•œ ë‘ ê°œì˜ í”„ë¡œí† ì½œ**

1. ARP : IP â†’ MAC
2. RARP : MAC â†’ IP

![](https://velog.velcdn.com/images/alstjr971/post/5b573f4f-f90f-483c-949e-2bf134ef330a/image.png)

---

# 2. ARP í”„ë¡œí† ì½œ

![](https://velog.velcdn.com/images/alstjr971/post/9e012708-5279-4fb0-822a-0bf1fd38d443/image.png)

**ì–´ë–¤ í˜¸ìŠ¤íŠ¸ë‚˜ ë¼ìš°í„°ê°€ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ë‚˜ ë¼ìš°í„°ì—ê²Œ ë³´ë‚¼ IP ë°ì´í„°ê·¸ë¨ì„ ê°€ì§€ê³  ìˆì„ ë•Œ, ì†¡ì‹ ìëŠ” ìˆ˜ì‹ ìì˜ IP ì£¼ì†Œë¥¼ ì•Œê³  ìˆë‹¤.**

ê·¸ëŸ¬ë‚˜ IP ë°ì´í„°ê·¸ë¨ì€ ë¬¼ë¦¬ì  ë„¤íŠ¸ì›Œí¬ë¥¼ í†µê³¼í•˜ê¸° ìœ„í•´ `í”„ë ˆì„` ë‚´ì— `ìº¡ìŠí™”` ë˜ì–´ì•¼ í•œë‹¤.

> ì¦‰, ì†¡ì‹ ìëŠ” ìˆ˜ì‹ ìì˜ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì•Œì•„ì•¼ í•œë‹¤.
**- 2ê³„ì¸µì„ ì§€ë‚˜ê°€ë ¤ë©´ MAC ì£¼ì†Œë¥¼ ì•Œì•„ì•¼ í•¨**
> 

**ğŸ’¡ARPëŠ” IP í”„ë¡œí† ì½œë¡œë¶€í„° IP ì£¼ì†Œë¥¼ ë°›ì•„ì„œ, ì´ë¥¼ í•´ë‹¹ IPì˜ MAC ì£¼ì†Œë¡œ ë³€í™˜í•œ í›„, ë°ì´í„° ë§í¬ ê³„ì¸µì— ì „ë‹¬í•˜ëŠ” í”„ë¡œí† ì½œì´ë‹¤.**

## 2.1 ARP ë™ì‘

![](https://velog.velcdn.com/images/alstjr971/post/37ff1947-ec10-45ac-b320-30521cfbc03e/image.png)

1. ì™¼ìª½ì— ìˆëŠ” ì‹œìŠ¤í…œ AëŠ” IP ì£¼ì†Œë¡œ 141.23.56.23ì„ ê°€ì§„ ë‹¤ë¥¸ ì‹œìŠ¤í…œ Bì—ê²Œ íŒ¨í‚·ì„ ë³´ë‚´ë ¤ê³  í•¨

2. ì‹œìŠ¤í…œ AëŠ” ì‹¤ì œ ì „ë‹¬ì„ ìœ„í•´, ì´ íŒ¨í‚·ì„ ë°ì´í„°ë§í¬ ê³„ì¸µì— ë³´ë‚´ì•¼ í•œë‹¤.
  - í•˜ì§€ë§Œ, ìˆ˜ì‹ ìì˜ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ëª¨ë¥´ëŠ” ìƒí™©
  - ëª©ì ì§€ IP ì£¼ì†Œë§Œ ì•Œê³  ìˆìŒ(DNS ì„œë²„ë¥¼ í†µí•´)

3. ì‹œìŠ¤í…œ AëŠ” ARP ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•´ ì‹œìŠ¤í…œ Bì˜ MAC ì£¼ì†Œë¥¼ ë¬»ëŠ” ARP ìš”ì²­ íŒ¨í‚·ì„ `ë¸Œë¡œë“œìºìŠ¤íŠ¸`í•¨

3. ìœ„ íŒ¨í‚·ì€ ë¬¼ë¦¬ì ì¸ ë„¤íŠ¸ì›Œí¬ ìƒì— ìˆëŠ” ëª¨ë“  ì‹œìŠ¤í…œì´ ìˆ˜ì‹ í•˜ì§€ë§Œ, ì˜¤ì§ ì‹œìŠ¤í…œ Bë§Œ ì‘ë‹µ(ë‚˜ë¨¸ì§€ëŠ” íê¸°í•¨)

4. ì‹œìŠ¤í…œ BëŠ” ìì‹ ì˜ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ í¬í•¨í•˜ëŠ” ARP ì‘ë‹µ í•´í‚·ì„ ë³´ëƒ„

5. ì´ì œ ì‹œìŠ¤í…œ AëŠ” Bë¡œ ê°€ëŠ” ëª¨ë“  íŒ¨í‚·ì„ ìˆ˜ì‹ ëœ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì‚¬ìš©í•´ ì „ì†¡

![](https://velog.velcdn.com/images/alstjr971/post/8bde8f9d-8247-44f9-b3d7-46c475475626/image.png)

![](https://velog.velcdn.com/images/alstjr971/post/c4e29f6b-24f8-4376-897d-fe1a5ce6dc02/image.png)

![](https://velog.velcdn.com/images/alstjr971/post/14fa648d-82ed-4934-931a-f5504304f8f7/image.png)

---

# 3. í”„ë¡ì‹œ ARP
**í”„ë¡ì‹œ ARP ê¸°ìˆ ì€ `ì„œë¸Œë„·íŒ… íš¨ê³¼`ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.**

- í”„ë¡ì‹œ ARPëŠ” í˜¸ìŠ¤íŠ¸ ì§‘í•©ì„ ëŒ€ì‹ í•˜ì—¬ ìˆ˜í–‰í•˜ëŠ” ARP
- í”„ë¡ì‹œ ARPë¥¼ ìˆ˜í–‰í•˜ëŠ” ë¼ìš°í„°ê°€ ì´ ì§‘í•© ì¤‘ í•œ í˜¸ìŠ¤íŠ¸ì˜ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì°¾ëŠ” ARP ìš”ì²­ì„ ë°›ìœ¼ë©´, ê·¸ ë¼ìš°í„°ëŠ” ìì‹ ì˜ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ARP ì‘ë‹µ ë©”ì‹œì§€ë¥¼ í†µí•´ ì•Œë¦¼

í›„ì— ë¼ìš°í„°ê°€ ì‹¤ì œ IP íŒ¨í‚·ì„ ë°›ìœ¼ë©´, ì´ íŒ¨í‚·ì„ ì ì ˆí•œ í˜¸ìŠ¤íŠ¸ë‚˜ ë¼ìš°í„°ì—ê²Œ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

![](https://velog.velcdn.com/images/alstjr971/post/79458a86-692f-41c6-8c89-6680ea54ec82/image.png)


---

# 4. ARP íŒ¨í‚¤ì§€
**ë‹¨ìˆœí™”ëœ ARP ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€**

> ê°€ìƒì˜ ARP íŒ¨í‚¤ì§€ì˜ êµ¬ì„±ìš”ì†Œì™€ ì´ êµ¬ì„±ìš”ì†Œë“¤ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì‚´í´ë´„ìœ¼ë¡œì¨ ARP ë™ì‘ êµ¬ì¡°ë¥¼ ìì„¸íˆ ì´í•´í•´ë³´ì.

![](https://velog.velcdn.com/images/alstjr971/post/b12861bc-87fc-49a4-bf34-14977f7b6f7c/image.png)

**ğŸ’¡ARP íŒ¨í‚¤ì§€ëŠ” 5ê°œì˜ êµ¬ì„±ìš”ì†Œë¡œ êµ¬ì„±ëœë‹¤.ğŸ”¥**

### 4.1 ìºì‹œ í…Œì´ë¸” - MAC ì£¼ì†Œ ìºì‹±

- ì†¡ì‹ ìëŠ” ì¼ë°˜ì ìœ¼ë¡œ ëª©ì ì§€ì— í•œ ê°œ ì´ìƒì˜ IP ë°ì´í„°ê·¸ë¨ì„ ë³´ë‚¸ë‹¤.
- ê°™ì€ í˜¸ìŠ¤íŠ¸ë‚˜ ë¼ìš°í„°ë¥¼ í–¥í•œ ê° ë°ì´í„°ê·¸ë¨ì„ ìœ„í•´ ë§¤ë²ˆ ARP í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë‹¤.

> ì´ë ‡ê²Œ ì—¬ëŸ¬ ê°œì˜ íŒ¨í‚·ë§ˆë‹¤ ARP ìš”ì²­ì„ í•˜ëŠ” ë¹„íš¨ìœ¨ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ìºì‹œ í…Œì´ë¸”ì„ ì‚¬ìš©í•œë‹¤.
- ìºì‹œ í…Œì´ë¸”ì— ì €ì¥ëœ ì£¼ì†ŒëŠ” ë‹¤ìŒ ëª‡ ë¶„ ë™ì•ˆ ê°™ì€ ìˆ˜ì‹ ìë¡œ ë³´ë‚´ì§€ëŠ” ë°ì´í„°ê·¸ë¨ì„ ìœ„í•´ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
- ARP í”„ë¡œí† ì½œì„ ì§€ë‚˜ê°€ê¸´ í•˜ì§€ë§Œ, ìºì‹œ í…Œì´ë¸”ì—ì„œ ë°”ë¡œ ë½‘ì•„ì„œ ì‹œê°„ ìµœì í™”

**`ìºì‹œ í…Œì´ë¸”ì˜ í•„ë“œ`**

1. ìƒíƒœ : FREE, PENDING, RESOLVED
2. í•˜ë“œì›¨ì–´ ìœ í˜• : ARP íŒ¨í‚·ì˜ í•´ë‹¹ í•„ë“œì™€ ë™ì¼
3. í”„ë¡œí† ì½œ ìœ í˜• : ARP íŒ¨í‚·ì˜ í•´ë‹¹ í•„ë“œì™€ ë™ì¼ 
4. í•˜ë“œì›¨ì–´ ê¸¸ì´ : ARP íŒ¨í‚·ì˜ í•´ë‹¹ í•„ë“œì™€ ë™ì¼
5. í”„ë¡œí† ì½œ ê¸¸ì´ : ARP íŒ¨í‚·ì˜ í•´ë‹¹ í•„ë“œì™€ ë™ì¼
6. ì¸í„°í˜ì´ìŠ¤ ë²ˆí˜¸ : NIC ì´ë¦„
7. í ë²ˆí˜¸ : ì£¼ì†Œ ë³€í™˜ì„ ê¸°ë‹¤ë¦¬ëŠ” íŒ¨í‚·ë“¤ì„ ë²ˆí˜¸ë¡œ í‘œì‹œëœ íì— ì‚½ì…
8. ì‹œë„ : ì´ ì—”íŠ¸ë¦¬ë¥¼ ìœ„í•´ ARP ìš”ì²­ì„ ë³´ë‚¸ íšŸìˆ˜
9. íƒ€ì„ì•„ì›ƒ : ì—”íŠ¸ë¦¬ ìˆ˜ëª…
10. í•˜ë“œì›¨ì–´ ì£¼ì†Œ : ëª©ì ì§€ í•˜ë“œì›¨ì–´ ì£¼ì†Œ
11. í”„ë¡œí† ì½œ ì£¼ì†Œ : ëª©ì ì§€ IP ì£¼ì†Œ

### 4.2 í - ARP íŒ¨í‚· ëŒ€ê¸° ê³µê°„

**ARPê°€ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì–»ìœ¼ë ¤ê³  í•˜ëŠ” ë™ì•ˆ, IP íŒ¨í‚·ì„ ì €ì¥í•˜ê¸° ìœ„í•˜ì—¬ íë¥¼ ì‚¬ìš©í•œë‹¤.**

ì¶œë ¥ ëª¨ë“ˆì´ í•´ê²°ë˜ì§€ ì•Šì€ íŒ¨í‚·ì„ í•´ë‹¹ íë¡œ ì „ì†¡í•œë‹¤.

ì…ë ¥ ëª¨ë“ˆì€ íì—ì„œ íŒ¨í‚·ì„ ê°€ì ¸ì™€ í•´ê²°ëœ ë¬¼ë¦¬ ì£¼ì†Œì™€ í•¨ê»˜ ë°ì´í„°ë§í¬ ê³„ì¸µì— ì „ì†¡í•œë‹¤.

### 4.3 ì¶œë ¥ ëª¨ë“ˆ - ë‚´ë³´ë‚´ê¸°

1. Sleep until an IP packet is received from IP software.
2. Check cache table for an entry corresponding to the destination of IP packet
3. If (entry is found)
3.1 If (the state is RESOLVED)
3.1.1 Extract the value of the hardware address from the entry
3.1.2 Send the packet and the hardware address to data link layer
3.1.3 Return
3.2 If (the state is PENDING)
3.2.1 Enqueue the packet to the corresponding queue
3.2.2 Return
4. If (entry is not found)
4.1 Create a cache with state set to PENDING and â€œAttemptsâ€ set to 1
4.2 Create a queue
4.3 Enqueue the packet
4.4 Send an ARP request
5. Return

### 4.4 ì…ë ¥ ëª¨ë“ˆ - ë°›ê¸°

1. Sleep until an ARP packet (request or reply) arrives
2. Check the cache table to find the corresponding entry
3. If (found)
3.1 Update the entry
3.2 If (the state is PENDING)
3.2.1 While the queue is not empty
3.2.1.1 Dequeue one packet
3.2.1.2 Send the packet and the hardware address to data link
4. If (not found)
4.1 Create an entry
4.2 Add the entry to the table
5. If (the packet is a request)
5.1 Send an ARP reply
6. Return


### 4.5 ìºì‹œ ì œì–´ ëª¨ë“ˆ - LRU, ìºì‹œ í…Œì´ë¸” ê´€ë¦¬

1. Sleep until the periodic timer matures
2. Repeat for every entry in the cache table
2.1 If (the state is FREE) Continue
2.2 If (the state is PENDING)
2.2.1 Increment the value of â€œAttemptsâ€ by 1
2.2.2 If (â€œAttemptsâ€ greater than â€œMaximumâ€)
2.2.2.1 Change the state to FREE
2.2.2.2 Destroy the corresponding queue
2.2.3 Else
2.2.3.1 Send an ARP request
2.2.4 Continue
2.3 If (the state is RESOLVED)
2.3.1 Decrement the value of time-out
2.3.2 If (time-out less than or equal to zero)
2.3.2.1 Change the state to FREE
2.3.2.2 Destroy the corresponding queue 

![](https://velog.velcdn.com/images/alstjr971/post/f007f691-0004-4791-830e-401b39644bab/image.png)
